<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cliffhanger</title>
</head>
<body>
    <div style=" background: url(https://cliffhanger.netlify.app/Assets/BackgroundFilterd.png); width: 100vw; height: 100vh; position: absolute; z-index: -1; top: 0px; left: 0px; object-fit: cover; background-size:100% 100%;">
    </div>

    <div style="display: flex; justify-content: center;">
        <div style="background: url(https://cliffhanger.netlify.app/Assets/ClliffhangerTxt.png); background-size: 363px 70px; background-repeat: no-repeat;  width: 363px; height: 70px; position: absolute; text-align: center; margin-top: 80px; ">
        </div>

        <!-- <div id="levelMenu" style="filter: drop-shadow(0 0.2rem 0.25rem rgba(0, 0, 0, 0.645)); margin-top: 180px; width: 650px; height: 500px; background-color: #1C3761; border-radius: 20px; position: relative; overflow-y: auto; overflow-x: hidden;">

             <div onclick="loadLevel(15)" class="level" style="width: 100%; height: 20%; border-radius: 20px; display: flex; align-items: center; position: relative;">
                <img src="https://cliffhanger.netlify.app/Assets/Playbtn.png" style="margin-left: 20px;">
                <h1 style="color: white; font-size: 25px; margin-top: -10px; left: 102px; position: absolute;">Level 15</h1>
                <h1 style="color: rgba(255, 255, 255, 0.843); font-size: 18px; margin-top: 40px; margin-left: 10px;">02:00:00</h1>
                <h1 style="color: rgba(255, 255, 255, 0.843); font-size: 18px; margin-top: 40px; margin-left: 10px;">25 Points</h1>
            
                <div style="width: 110px; height: 35px; border-radius: 20px; background-color: #3D547A; display: flex; align-items: center; justify-content: center; position: absolute; right: 40px;">
                    <h1 style="color: white; font-size: 18px; text-align: center;">Starta</h1>
                </div>

            </div> -->
        
            <div style="display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;">
                <div onclick="playRandomLevel()" style="width: 250px; height: 75px; background-color: #3d547a; border-radius: 20px; position: absolute; top: 200px; cursor: pointer;">
                    <h1 style="color: white; font-size: 25px; text-align: center; margin-top: 20px;">Play</h1>
                </div>
            </div>
            

        <!-- </div> --> 

        <div id="highscoreContainer" style="filter: drop-shadow(0 0.2rem 0.25rem rgba(0, 0, 0, 0.645)); margin-top: 180px; width: 350px; height: 200px; background-color: #1C3761; border-radius: 20px; position: absolute; right: 125px;">

            <div style="border-radius: 20px; display: flex; align-items: center; position: relative;">
                <div title="High scores reset after 5 days" style="display: flex; justify-content: center; align-items: center; flex-direction:row; width: 100%; gap:20px; margin-top: 10px;">
                    <h1 style="color: white; font-size: 25px;">High Score</h1>
                    <img src="https://cliffhanger.netlify.app/Assets/TrophyBtn.png" style="width: 60px; height: 60px;">
                </div>
                <div id="highscoreList" style="display: flex; justify-content: center; flex-direction: column; position: absolute; top: 70px; width: 100%; align-items: center; color: white;">
                    <!-- <h1 style="color: rgba(255, 255, 255, 0.843); font-size: 18px;">level 15: 25 Points</h1> -->
                    <h1 style="color: rgba(255, 255, 255, 0.843); font-size: 18px; margin-top: -10px;"> &#8205;</h1>

                    <!-- <h1 style="color: rgba(255, 255, 255, 0.843); font-size: 18px; margin-top: -10px;">level 15: 25 Points</h1> -->
                </div>
            </div>

        </div>
    </div>


</body>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
<script>

    var tasks = [
        // {Level: 1, task: 'Behovsanalysera kunden ifall det finns fler mobila tjänster dom önskar lägga till i företaget'},
        // {Level: 2, task: 'Kontrollera med kunden ifall dom har fler adresser dom är verksamma på då vi har möjlighet att ansluta deras företag till Fiber'},
        // {Level: 3, task: 'Förläng 2 abonnemang'},
        // {Level: 4, task: 'Behovsanalysera kundens inkommande trafik och fråga hur det kommer sig att kunden inte har ett fastnummer till företaget ännu'},
        // {Level: 5, task: 'Erbjud möjlighet att ordna ett fastnummer till kunden samt ett riktigt bra nummer'},
        // {Level: 6, task: 'Erbjud möjligheten att se över ifall vi kan sänka deras kostnader genom att flytta tjänsterna till företag'},
        // {Level: 7, task: 'Nyteckna 1 abonnemang'},
        // {Level: 8, task: 'Nyteckna ett fiber eller ett mobilt bredband'},
        // {Level: 9, task: 'Förläng 2 abonnemang'},
        // {Level: 10, task: 'Behovsanalysera om det finns fler i företaget som behöver en mobil tjänst'},
        // {Level: 11, task: 'Se över ifall kunden önskar en ny mobiltelefon, vi har möjlighet att lägga det mot 24 eller 36 månaders delbetalning'},
        // {Level: 12, task: 'Erbjud kunden det som går att förlänga, om kunden tackar nej, be om att få återkomma'},
        // {Level: 13, task: 'Förläng ett mobilt bredband eller fiber'},
        // {Level: 14, task: 'Nyteckna eller förläng ett abonnemang'},
        // {Level: 15, task: 'Nyteckna valfritt abonnemang'},
        // {Level: 16, task: 'Se över behovet av fastnummer'},
        // {Level: 17, task: 'Se över behovet av fler mobilnummer'},
        // {Level: 18, task: 'Förläng 2 abonnemang'},
        // {Level: 19, task: 'Teckna en fibertjänst'},
        // {Level: 20, task: 'Teckna ett fastnummer'},
        // {Level: 21, task: 'Teckna ett nytt abonnemang'},
        // {Level: 22, task: 'Erbjud en offert samt återkoppling'},
        // {Level: 23, task: 'Erbjud dig att genom att förnya eller teckna avtal med dig så kan dom vända sig till dig som kontaktperson'},
        // {Level: 24, task: 'Förläng 1 abonnemang'},
        // {Level: 25, task: 'Nyteckna valfritt abonnemang'},
        // {Level: 26, task: 'Nyteckna mobilabonnemang'},
        // {Level: 27, task: 'Nyteckna Fibertjänst'},
        // {Level: 28, task: 'Nyteckna Växel'},
        // {Level: 29, task: 'Nyteckna Mobilt Bredband'},
        // {Level: 30, task: 'Nyteckna 4 tjänster'}
    ]

    function loadJSON() {
        fetch('tasks.json')
            .then(response => response.json())
            .then(data => {
                tasks = data.data
                console.log(tasks)
            })
    }

    // Call the function to load JSON
    loadJSON();

    function playRandomLevel()
    {
        const RandomTask = Math.floor(Math.random() * (tasks.length - 0 + 1)) + 0;
        loadLevel(RandomTask)
    }

    function loadLevel(level)
    {

        Cookies.remove('streakSummary') // resets streak

        console.log(level)

        Cookies.set('level', level)

        location.href = '/game.html'
        
    }

    function loadLevels()
    {
        function shuffleList(inputList) {
            // Make a copy of the original list to avoid modifying the input directly
            const shuffledList = [...inputList];

            // Fisher-Yates (Knuth) shuffle algorithm
            for (let i = shuffledList.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledList[i], shuffledList[j]] = [shuffledList[j], shuffledList[i]];
            }

            return shuffledList;
        }

        const shuffledTasks = shuffleList(tasks)

        for (l in shuffledTasks)
        {
            const Lev = shuffledTasks[l]

            const elem = document.createElement("div");
            elem.style = 'width: 100%; height: 20%; border-radius: 20px; display: flex; align-items: center; position: relative;'
            elem.setAttribute( "class", "level" );
            elem.setAttribute( "onclick", "loadLevel("+Lev.Level+")" );
            elem.innerHTML = ' <img src="https://cliffhanger.netlify.app/Assets/Playbtn.png" style="margin-left: 20px;"> <h1 style="color: white; font-size: 25px; margin-top: -10px; left: 102px; position: absolute;">Level '+Lev.Level+'</h1> <h1 style="color: rgba(255, 255, 255, 0.843); font-size: 18px; margin-top: 40px; margin-left: 10px;">02:00:00</h1> <h1 style="color: rgba(255, 255, 255, 0.843); font-size: 18px; margin-top: 40px; margin-left: 10px;">25 Points</h1> <div style="width: 110px; height: 35px; border-radius: 20px; background-color: #3D547A; display: flex; align-items: center; justify-content: center; position: absolute; right: 40px;"> <h1 style="color: white; font-size: 18px; text-align: center;">Start</h1> </div> '
            document.getElementById('levelMenu').appendChild(elem);
        }
    }

    function loadHighscore()
    {
        var hs = Cookies.get('highscore')
        if(hs == undefined)
        {
            console.log('init high score')
            // hs = [{level: 0}]
            hs = '0'

            var highScoreStringed = JSON.stringify(hs)
            Cookies.set('highscore', highScoreStringed)
        }else{
            hs = JSON.parse(hs)
            console.log('hs: ')
            console.log(hs)
            document.getElementById('highscoreList').innerHTML = 'highscore: ' +  hs
        }


        // for (high in hs)
        // {
        //     var h = hs[high]

        //     if(h.level == 0) {continue;}
            
        //     const elem = document.createElement("h1");
        //     elem.style = 'color: rgba(255, 255, 255, 0.843); font-size: 18px; margin-top: -10px;'
        //     elem.innerHTML = 'level ' + h.level + ': ' + h.points + ' Points, ' + h.time + ' Time'
        //     document.getElementById('highscoreList').appendChild(elem);
        // }

        // if(hs.length > 5)
        // {
        //     document.getElementById('highscoreContainer').style.height = '500px'
        // }

        
    }

    // loadLevels()
    loadHighscore()

</script>
</html>

<style>
    @font-face{
        font-family: ProximaNovaAltBold;
        src: url(https://cliffhanger.netlify.app/Assets/Fonts/Proxima-Nova-Alt-Bold.otf);
    }

    body{
        font-family: ProximaNovaAltBold;
    }

    .level{
        cursor: pointer;
    }

    .level:hover{
        background-color: #234273;
    }

    *::-webkit-scrollbar {
            width: 12px;
        }

        *::-webkit-scrollbar-track {
            background: #1c3761;
            border-radius: 20px;
        }

        *::-webkit-scrollbar-thumb {
            background-color: #3d547a;
            border-radius: 20px;
            border: transparent;
        }
</style>
